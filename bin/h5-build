#!/usr/bin/env node

var program = require('commander');

/**
 * h5-build cli
 * --release --compress --watch --config --verbose --cache
 * --debug --port --config --verbose --cache
 */
program
  .option('--debug [value]', 'debug or release mode', false)
  .option('--port [port]', 'debug port', 3000)
  .option('--watch [value]', 'watch file changes and rebuild', false)
  .option('--cache', 'cache file')
  .option('--compress', 'compress build result')
  .option('--config <path>', 'custom config path, default is webpack.config.js')
  .option('--verbose', 'run with more logging messages.')
  .parse(process.argv);

program.cwd = process.cwd();

if(program.debug){
  require('../lib/debug').default(program);
}else{
  require('../lib/build').default(program, function () {
    if(!program.watch){
      process.exit(0);
    }
  });
}

